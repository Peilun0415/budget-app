/* ===== 基礎重置 ===== */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  --pink-light: #f0f6ff;
  --pink-mid: #c8deff;
  --pink-main: #4a90e2;
  --pink-dark: #2563c7;
  --green-light: #e8f8f0;
  --green-main: #34a87a;
  --red-light: #fff0f0;
  --red-main: #f05a5a;
  --purple-light: #eef4ff;
  --purple-main: #4a90e2;
  --text-dark: #1a2a3a;
  --text-mid: #5a7080;
  --text-light: #9ab0c0;
  --white: #ffffff;
  --shadow: 0 4px 16px rgba(74, 144, 226, 0.14);
  --radius: 18px;
  --radius-sm: 10px;
  --bg: #f0f6ff;
}

body {
  font-family: 'Segoe UI', 'PingFang TC', 'Microsoft JhengHei', sans-serif;
  background: linear-gradient(160deg, #f0f6ff 0%, #e8f0fb 50%, #f5f8ff 100%);
  min-height: 100vh;
  color: var(--text-dark);
  padding-bottom: 40px;
}

/* ===== 讀取畫面 ===== */
.splash-screen {
  position: fixed;
  inset: 0;
  background: var(--bg);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  z-index: 9999;
  transition: opacity 0.35s ease, visibility 0.35s ease;
}

.splash-screen.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.splash-logo {
  font-size: 56px;
  line-height: 1;
  animation: splash-pop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

.splash-title {
  font-size: 22px;
  font-weight: 800;
  color: var(--text-dark);
  letter-spacing: 1px;
  animation: splash-pop 0.5s 0.08s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

.splash-spinner {
  width: 28px;
  height: 28px;
  border: 3px solid var(--pink-light);
  border-top-color: var(--pink-main);
  border-radius: 50%;
  animation: splash-spin 0.8s linear infinite;
  margin-top: 8px;
}

@keyframes splash-pop {
  from { opacity: 0; transform: scale(0.7); }
  to   { opacity: 1; transform: scale(1); }
}

@keyframes splash-spin {
  to { transform: rotate(360deg); }
}

/* ===== 登入畫面 ===== */
.login-screen {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}

.login-card {
  background: var(--white);
  border-radius: 28px;
  padding: 40px 28px;
  text-align: center;
  box-shadow: 0 8px 40px rgba(74, 144, 226, 0.18);
  width: 100%;
  max-width: 360px;
}

.login-logo {
  font-size: 56px;
  margin-bottom: 16px;
}

.login-title {
  font-size: 26px;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 10px;
}

.login-desc {
  font-size: 14px;
  color: var(--text-mid);
  line-height: 1.7;
  margin-bottom: 28px;
}

.google-login-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
  background: var(--white);
  border: 2px solid var(--pink-mid);
  border-radius: var(--radius);
  padding: 14px 20px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-dark);
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 2px 10px rgba(74, 144, 226, 0.12);
}

.google-login-btn:active {
  background: var(--pink-light);
  transform: scale(0.98);
}

/* ===== 訪客登入 ===== */
.login-divider {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 20px 0 16px;
  color: var(--text-light);
  font-size: 13px;
}
.login-divider::before,
.login-divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--pink-mid);
}
.guest-login-wrap {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
/* 登入 / 註冊 tab */
.guest-mode-tabs {
  display: flex;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  padding: 3px;
  gap: 3px;
}
.guest-mode-tab {
  flex: 1;
  border: none;
  background: transparent;
  border-radius: calc(var(--radius-sm) - 2px);
  padding: 8px;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-mid);
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
}
.guest-mode-tab.active {
  background: var(--white);
  color: var(--pink-main);
  box-shadow: 0 1px 4px rgba(74,144,226,0.15);
}
/* 欄位群組 */
.guest-fields {
  display: flex;
  flex-direction: column;
  gap: 8px;
}
.guest-name-input {
  width: 100%;
  border: 1.5px solid var(--pink-mid);
  border-radius: var(--radius-sm);
  padding: 11px 14px;
  font-size: 15px;
  color: var(--text-dark);
  background: var(--white);
  outline: none;
  transition: border-color 0.2s;
}
.guest-name-input:focus {
  border-color: var(--pink-main);
}
.guest-name-input::placeholder {
  color: var(--text-light);
}
.guest-login-btn {
  width: 100%;
  background: linear-gradient(135deg, #4a90e2 0%, #2563c7 100%);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  padding: 13px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: opacity 0.15s, transform 0.15s;
}
.guest-login-btn:active {
  opacity: 0.85;
  transform: scale(0.97);
}
.guest-login-warn {
  font-size: 12px;
  color: var(--red-main);
  min-height: 16px;
  text-align: center;
}
.guest-login-hint {
  font-size: 12px;
  color: var(--text-light);
  text-align: center;
  line-height: 1.5;
}
/* 訪客標示（header 右側） */
.guest-badge {
  font-size: 12px;
  color: var(--text-light);
  background: var(--pink-light);
  border-radius: 20px;
  padding: 3px 10px;
  font-weight: 500;
}

/* ===== 頂部標題 ===== */
.app-header {
  background: linear-gradient(135deg, #4a90e2 0%, #2563c7 100%);
  color: white;
  padding: 16px 20px;
  box-shadow: 0 4px 16px rgba(74, 144, 226, 0.3);
  position: sticky;
  top: 0;
  z-index: 100;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.header-title h1 {
  font-size: 20px;
  font-weight: 700;
  letter-spacing: 1px;
  text-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.user-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 2px solid rgba(255,255,255,0.6);
  object-fit: cover;
  display: none;
}

.user-avatar.visible {
  display: block;
}

.logout-btn {
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.logout-btn:active {
  background: rgba(255,255,255,0.35);
}

/* ===== 月份導覽 ===== */
.month-nav-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  font-size: 16px;
  font-weight: 600;
  color: var(--text-dark);
  padding: 14px 20px;
  background: var(--white);
  border-bottom: 1px solid #ddeeff;
}

.month-btn {
  background: var(--pink-light);
  border: none;
  color: var(--pink-dark);
  width: 32px;
  height: 32px;
  border-radius: 50%;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
  line-height: 1;
}

.month-btn:active {
  background: var(--pink-mid);
}

/* ===== 統計卡片 ===== */
.summary-section {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  padding: 18px 16px 0;
}

.summary-card {
  background: var(--white);
  border-radius: var(--radius);
  padding: 14px 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  box-shadow: var(--shadow);
  transition: transform 0.2s;
}

.summary-card:active {
  transform: scale(0.97);
}

.summary-icon {
  font-size: 24px;
}

.summary-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.summary-label {
  font-size: 11px;
  color: var(--text-light);
  font-weight: 500;
}

.summary-amount {
  font-size: 15px;
  font-weight: 700;
}

.income-card .summary-amount { color: var(--green-main); }
.expense-card .summary-amount { color: var(--red-main); }
.balance-card .summary-amount { color: var(--pink-main); }

/* ===== 主頁預算小卡（水位圖） ===== */
#homeBudgetWidget {
  margin: 14px 16px 0;
  background: var(--white);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
}

.home-budget-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px 10px;
  border-bottom: 1px solid var(--pink-light);
}

.home-budget-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-dark);
}

.home-budget-more {
  background: none;
  border: none;
  font-size: 12px;
  font-weight: 600;
  color: var(--pink-main);
  cursor: pointer;
  padding: 2px 6px;
  border-radius: 6px;
  transition: background 0.15s;
}
.home-budget-more:hover { background: var(--pink-light); }

/* Grid 容器：兩欄 */
.hb-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  padding: 12px;
}

/* 水位卡片 */
.hb-tank-card {
  border-radius: 14px;
  overflow: hidden;
  background: #fce8f0;
  display: flex;
  flex-direction: column;
  cursor: default;
}

/* 水位填充區 */
.tank-fill-wrap {
  position: relative;
  height: 110px;
  overflow: hidden;
}

/* 水位：從底部往上，深粉色 */
.tank-fill {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  background: linear-gradient(0deg, #e8638e 0%, #f4a0bf 100%);
  transition: height 0.6s cubic-bezier(0.34, 1.2, 0.64, 1);
}

/* 水面波紋（偽元素） */
.tank-fill::before {
  content: '';
  position: absolute;
  top: -5px;
  left: -50%;
  width: 200%;
  height: 12px;
  background: radial-gradient(ellipse at center, rgba(255,255,255,0.45) 0%, transparent 70%);
  border-radius: 50%;
  animation: wave 2.4s ease-in-out infinite;
}
@keyframes wave {
  0%, 100% { transform: translateX(0); }
  50%       { transform: translateX(18%); }
}

/* 文字層（疊在水位上） */
.tank-content {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1px;
  padding: 8px 6px;
  pointer-events: none;
}

.tank-icon  { font-size: 20px; line-height: 1; }
.tank-label {
  font-size: 11px;
  font-weight: 700;
  color: var(--text-dark);
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 90%;
}
.tank-remain {
  font-size: 14px;
  font-weight: 800;
  line-height: 1.2;
  color: var(--text-dark);
  text-shadow: 0 1px 3px rgba(255,255,255,0.6);
}
.tank-remain.over {
  color: var(--red-main);
}
.tank-limit {
  font-size: 10px;
  color: var(--text-mid);
  font-weight: 500;
}

/* 頂部百分比列 */
.tank-status {
  padding: 6px 8px 5px;
  text-align: center;
  font-size: 13px;
  font-weight: 800;
  background: rgba(255,255,255,0.7);
  letter-spacing: 0.5px;
}
.tank-status-pct  { color: var(--text-mid); }
.tank-status-over { color: var(--text-mid); }

/* 「還有 N 項」佔位卡 */
.hb-extra-card {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 14px;
  background: var(--pink-light);
  font-size: 12px;
  color: var(--text-light);
  font-weight: 600;
  min-height: 80px;
}

/* ===== 新增按鈕 ===== */
.add-btn-wrap {
  padding: 18px 16px 0;
  display: flex;
  gap: 10px;
  align-items: center;
}

.add-btn-wrap .add-btn {
  flex: 1;
}

/* 語音按鈕 */
.voice-btn {
  flex-shrink: 0;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: none;
  background: var(--white);
  box-shadow: var(--shadow);
  font-size: 22px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.15s, box-shadow 0.15s;
  position: relative;
}

.voice-btn:active {
  transform: scale(0.93);
}

/* 聆聽中：脈衝動畫 */
.voice-btn.listening {
  background: var(--pink-light);
  box-shadow: 0 0 0 0 rgba(233, 100, 148, 0.5);
  animation: voice-pulse 1.2s ease-out infinite;
}

@keyframes voice-pulse {
  0%   { box-shadow: 0 0 0 0 rgba(233, 100, 148, 0.5); }
  70%  { box-shadow: 0 0 0 14px rgba(233, 100, 148, 0); }
  100% { box-shadow: 0 0 0 0 rgba(233, 100, 148, 0); }
}

/* 語音狀態提示 Toast */
.voice-toast {
  margin: 10px 16px 0;
}

.voice-toast-inner {
  background: var(--text-dark);
  color: white;
  border-radius: 12px;
  padding: 10px 14px;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  font-weight: 500;
}

.voice-toast-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--pink-main);
  flex-shrink: 0;
  animation: dot-blink 1s ease-in-out infinite;
}

@keyframes dot-blink {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.2; }
}

/* ===== 搜尋列 ===== */
.search-bar-wrap {
  padding: 12px 16px 0;
}
.search-input-wrap {
  display: flex;
  align-items: center;
  background: var(--white);
  border: 1.5px solid var(--pink-mid);
  border-radius: var(--radius);
  padding: 0 12px;
  gap: 8px;
  transition: border-color 0.2s;
}
.search-input-wrap:focus-within {
  border-color: var(--pink-main);
  box-shadow: 0 0 0 3px rgba(74,144,226,0.12);
}
.search-icon {
  font-size: 16px;
  flex-shrink: 0;
  opacity: 0.6;
}
.search-input {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  font-size: 15px;
  color: var(--text-dark);
  padding: 11px 0;
}
.search-input::placeholder {
  color: var(--text-light);
}
.search-clear-btn {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text-light);
  font-size: 14px;
  padding: 4px;
  border-radius: 50%;
  transition: color 0.15s, background 0.15s;
  flex-shrink: 0;
}
.search-clear-btn:hover {
  color: var(--text-mid);
  background: var(--pink-light);
}
/* 搜尋模式下列表標題 */
.list-title.searching {
  color: var(--pink-main);
}

.add-btn {
  width: 100%;
  background: linear-gradient(135deg, #4a90e2 0%, #2563c7 100%);
  color: white;
  border: none;
  border-radius: var(--radius);
  padding: 16px;
  font-size: 17px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 20px rgba(74, 144, 226, 0.35);
  transition: transform 0.15s, box-shadow 0.15s;
  letter-spacing: 1px;
}

.add-btn:active {
  transform: scale(0.97);
  box-shadow: 0 3px 10px rgba(74, 144, 226, 0.25);
}

/* ===== 記帳列表 ===== */
.list-section {
  padding: 20px 16px 0;
}

.list-title {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-mid);
  margin-bottom: 12px;
  padding-left: 4px;
}

.record-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.empty-state {
  text-align: center;
  padding: 50px 20px;
  color: var(--text-light);
}

.empty-state span {
  font-size: 48px;
  display: block;
  margin-bottom: 12px;
  opacity: 0.5;
}

.empty-state p {
  font-size: 15px;
  line-height: 1.7;
}

/* ===== 記帳項目卡片 ===== */
.record-item {
  background: var(--white);
  border-radius: var(--radius);
  padding: 14px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  box-shadow: 0 2px 10px rgba(200, 150, 180, 0.12);
  animation: slideIn 0.25s ease;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateY(-8px); }
  to   { opacity: 1; transform: translateY(0); }
}

.record-cat-icon {
  width: 44px;
  height: 44px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  flex-shrink: 0;
}

.record-cat-icon.expense-icon {
  background: var(--red-light);
}

.record-cat-icon.income-icon {
  background: var(--green-light);
}

.record-info {
  flex: 1;
  min-width: 0;
}

.record-cat-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
}

.record-meta {
  font-size: 12px;
  color: var(--text-light);
  margin-top: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.record-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
  flex-shrink: 0;
}

.record-item-clickable {
  cursor: pointer;
  transition: background 0.15s, transform 0.15s;
}

.record-item-clickable:active {
  background: var(--pink-light);
  transform: scale(0.98);
}

.record-edit-hint {
  font-size: 18px;
  color: var(--text-light);
  font-weight: 300;
  line-height: 1;
}

/* ===== 彈窗底部按鈕列 ===== */
.form-action-row {
  display: flex;
  gap: 10px;
  margin-top: 6px;
}

.form-action-row .submit-btn {
  flex: 1;
  margin-top: 0;
}

.delete-record-btn {
  background: none;
  border: 2px solid var(--red-main);
  color: var(--red-main);
  border-radius: var(--radius);
  padding: 13px 16px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
  white-space: nowrap;
}

.delete-record-btn:active {
  background: var(--red-light);
}

.record-amount-wrap {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
}
.record-amount {
  font-size: 16px;
  font-weight: 700;
}
.record-amount.income { color: var(--green-main); }
.record-amount.expense { color: var(--red-main); }
.record-amount.transfer { color: var(--pink-main); }

/* 外幣標示（通用） */
.foreign-hint {
  font-size: 11px;
  color: var(--text-light);
  font-weight: 500;
}

/* 報表明細金額欄 */
.report-record-amount-wrap {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  flex-shrink: 0;
}

/* 外幣欄位輸入列 */
.foreign-toggle-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin: 10px 0 6px;
  padding: 4px 12px;
  border: 1.5px dashed var(--border);
  border-radius: 20px;
  background: none;
  color: var(--text-light);
  font-size: 13px;
  cursor: pointer;
  transition: border-color .2s, color .2s;
}
.foreign-toggle-btn:hover {
  border-color: var(--primary);
  color: var(--primary);
}
.foreign-amount-row {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-bottom: 8px;
  max-width: 100%;
  box-sizing: border-box;
}
.foreign-currency-select {
  flex: 3;
  min-width: 0;
  font-size: 13px;
  padding-left: 6px;
  padding-right: 4px;
}
.foreign-amount-wrap {
  flex: 1;
  min-width: 0;
}
.foreign-amount-input {
  flex: 7;
  min-width: 0;
  width: 0;
  height: 36px;
  padding: 0 10px;
  border: 1.5px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg);
  font-size: 15px;
  color: var(--text-dark);
  box-sizing: border-box;
  display: block;
}
.foreign-amount-input:focus {
  outline: none;
  border-color: var(--pink-main);
}
.foreign-clear-btn {
  flex-shrink: 0;
  background: none;
  border: none;
  color: var(--text-light);
  font-size: 16px;
  cursor: pointer;
  padding: 0 2px;
  line-height: 1;
}
.foreign-clear-btn:hover {
  color: var(--danger);
}

.delete-btn {
  background: none;
  border: none;
  color: var(--text-light);
  font-size: 16px;
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 6px;
  transition: color 0.2s, background 0.2s;
  line-height: 1;
}

.delete-btn:active {
  color: var(--red-main);
  background: var(--red-light);
}

/* ===== 彈窗 ===== */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(60, 30, 50, 0.45);
  backdrop-filter: blur(4px);
  z-index: 200;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 16px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s;
  overflow-y: auto;
}

.modal-overlay.active {
  opacity: 1;
  pointer-events: all;
}

.modal {
  background: var(--white);
  border-radius: 28px;
  padding: 24px 20px 36px;
  width: calc(100% - 32px);
  max-width: 480px;
  flex-shrink: 0;
  transform: translateY(-20px);
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  margin-bottom: 16px;
}

.modal-overlay.active .modal {
  transform: translateY(0);
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
}

.modal-header h2 {
  font-size: 20px;
  font-weight: 700;
  color: var(--text-dark);
}

.close-btn {
  background: var(--pink-light);
  border: none;
  color: var(--pink-main);
  width: 34px;
  height: 34px;
  border-radius: 50%;
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}

.close-btn:active {
  background: var(--pink-mid);
}

/* ===== 收入/支出切換 ===== */
.type-toggle {
  display: flex;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  padding: 4px;
  margin-bottom: 20px;
  gap: 4px;
}

.type-btn {
  flex: 1;
  padding: 10px;
  border: none;
  border-radius: 8px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  background: transparent;
  color: var(--text-mid);
  transition: all 0.2s;
}

.type-btn.active {
  background: var(--white);
  color: var(--pink-dark);
  box-shadow: 0 2px 8px rgba(74, 144, 226, 0.2);
}

/* ===== 表單 ===== */
.form-group {
  margin-bottom: 18px;
}

.form-group label {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-mid);
  margin-bottom: 8px;
}

/* 金額列（分類按鈕 + 輸入框並排）*/
.amount-row {
  display: flex;
  align-items: stretch;
  gap: 8px;
}

.cat-pick-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  min-width: 72px;
  /* max-width: 72px; */
  padding: 8px 6px;
  background: var(--pink-light);
  border: 2px solid transparent;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: border-color 0.2s, background 0.2s;
  flex-shrink: 0;
}

.cat-pick-btn:hover,
.cat-pick-btn:focus {
  border-color: var(--pink-main);
  background: var(--pink-mid);
  outline: none;
}

.cat-pick-btn span:first-child {
  font-size: 22px;
  line-height: 1;
}

.cat-pick-btn #catPickName {
  font-size: 10px;
  font-weight: 600;
  color: var(--text-mid);
  text-align: center;
  max-width: 60px;
  overflow: hidden;
  line-height: 1.3;
  word-break: break-all;
}

.cat-pick-sub-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--pink-main);
}

.cat-pick-arrow {
  font-size: 9px;
  color: var(--text-light);
  line-height: 1;
}

.amount-row .amount-input-wrap {
  flex: 1;
}

.amount-input-wrap {
  display: flex;
  align-items: center;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  padding: 0 14px;
  border: 2px solid transparent;
  transition: border-color 0.2s;
}

.amount-input-wrap:focus-within {
  border-color: var(--pink-main);
}

.currency-sign {
  font-size: 18px;
  font-weight: 700;
  color: var(--pink-main);
  margin-right: 6px;
}

.amount-input-wrap input {
  flex: 1;
  background: transparent;
  border: none;
  outline: none;
  font-size: 24px;
  font-weight: 700;
  color: var(--text-dark);
  padding: 12px 0;
}

input[type="date"],
input[type="text"] {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  background: var(--pink-light);
  border: 2px solid transparent;
  border-radius: var(--radius-sm);
  padding: 12px 14px;
  font-size: 15px;
  color: var(--text-dark);
  outline: none;
  transition: border-color 0.2s;
  font-family: inherit;
  -webkit-appearance: none;
  appearance: none;
}

input[type="date"]:focus,
input[type="text"]:not(#amount):not(#searchInput):not(#recAmount):focus {
  border-color: var(--pink-main);
}

#amount:focus,
#searchInput:focus,
#recAmount:focus {
  outline: none;
  border-color: transparent;
}

/* ===== 類別格子 ===== */
.category-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
}

.cat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 10px 4px;
  border-radius: var(--radius-sm);
  border: 2px solid transparent;
  background: var(--pink-light);
  cursor: pointer;
  transition: all 0.15s;
  font-size: 11px;
  color: var(--text-mid);
  font-weight: 500;
}

.cat-item .cat-emoji {
  font-size: 22px;
}

.cat-item:active,
.cat-item.selected {
  border-color: var(--pink-main);
  background: var(--pink-mid);
  color: var(--pink-dark);
}

/* ===== 範本 ===== */
.modal-header-actions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.tpl-apply-btn {
  background: var(--pink-light);
  border: none;
  border-radius: 8px;
  font-size: 18px;
  width: 34px;
  height: 34px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s;
}
.tpl-apply-btn:hover { background: var(--pink-mid); }

.save-tpl-btn {
  width: 100%;
  margin-top: 8px;
  padding: 11px;
  background: none;
  border: 1.5px dashed var(--pink-mid);
  border-radius: var(--radius);
  color: var(--text-mid);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}
.save-tpl-btn:hover {
  border-color: var(--pink-main);
  color: var(--pink-main);
  background: var(--pink-light);
}

#tplListOverlay,
#tplNameOverlay,
#clearDataOverlay {
  z-index: 300;
}

#catPickerOverlay,
#recurringModalOverlay {
  z-index: 250;
}

.cat-picker-overlay {
  z-index: 400 !important;
}

.tpl-list-modal,
.tpl-name-modal {
  max-height: 70vh;
  display: flex;
  flex-direction: column;
}

.tpl-tabs {
  display: flex;
  gap: 6px;
  margin-bottom: 12px;
  flex-shrink: 0;
}

.tpl-tab {
  flex: 1;
  padding: 8px 0;
  border: none;
  border-radius: 10px;
  background: var(--pink-light);
  color: var(--text-mid);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}

.tpl-tab.active {
  background: var(--pink-main);
  color: #fff;
}

.tpl-list {
  overflow-y: auto;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 4px 0 8px;
}

.tpl-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background 0.15s;
  border: 2px solid transparent;
}
.tpl-item:hover { background: var(--pink-mid); border-color: var(--pink-main); }

.tpl-item-icon {
  font-size: 22px;
  flex-shrink: 0;
}

.tpl-item-info {
  flex: 1;
  min-width: 0;
}

.tpl-item-name {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-dark);
}

.tpl-item-desc {
  font-size: 12px;
  color: var(--text-mid);
  margin-top: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tpl-item-amount {
  font-size: 15px;
  font-weight: 700;
  flex-shrink: 0;
}
.tpl-item-amount.expense { color: var(--red-main); }
.tpl-item-amount.income  { color: var(--green-main); }
.tpl-item-amount.transfer { color: var(--pink-main); }
.tpl-item-amount.none { color: var(--text-light); font-size: 12px; }

.tpl-delete-btn {
  background: none;
  border: none;
  font-size: 16px;
  cursor: pointer;
  color: var(--text-light);
  padding: 4px;
  border-radius: 6px;
  flex-shrink: 0;
  transition: color 0.15s;
}
.tpl-delete-btn:hover { color: var(--red-main); }

/* ===== 轉帳 ===== */
.date-account-row {
  display: flex;
  gap: 10px;
  align-items: flex-end;
  margin-bottom: 18px;
}
.date-account-item {
  flex: 1;
  min-width: 0;
  margin-bottom: 0 !important;
}

.transfer-accounts-row {
  display: flex;
  align-items: flex-end;
  gap: 8px;
  margin-bottom: 18px;
}

.transfer-acc-group {
  flex: 1;
  margin-bottom: 0 !important;
}

.transfer-arrow {
  font-size: 20px;
  color: var(--pink-main);
  font-weight: 700;
  padding-bottom: 10px;
  flex-shrink: 0;
}

.exchange-toggle-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin: 4px 0 12px;
  padding: 6px 14px;
  border: 1.5px solid var(--border);
  border-radius: 20px;
  background: none;
  color: var(--text-mid);
  font-size: 13px;
  cursor: pointer;
  transition: border-color .2s, background .2s, color .2s;
  -webkit-tap-highlight-color: transparent;
}
.exchange-toggle-btn.active {
  border-color: var(--pink-main);
  background: var(--pink-light);
  color: var(--pink-main);
  font-weight: 600;
}
#exchangeAmountGroup {
  margin-bottom: 18px;
}
#exchangeAmountWrap input {
  font-size: 18px;
  font-weight: 600;
}
.exchange-hint {
  font-size: 12px;
  color: var(--text-light);
  margin: 6px 0 0;
  min-height: 16px;
}

.record-cat-icon.transfer-icon {
  background: #eef4ff;
  color: var(--pink-main);
}

/* ===== 提交按鈕 ===== */
.submit-btn {
  width: 100%;
  background: linear-gradient(135deg, #4a90e2 0%, #2563c7 100%);
  color: white;
  border: none;
  border-radius: var(--radius);
  padding: 16px;
  font-size: 17px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 20px rgba(74, 144, 226, 0.35);
  transition: transform 0.15s;
  letter-spacing: 1px;
  margin-top: 6px;
}

.submit-btn:active {
  transform: scale(0.97);
}

/* ===== 日期分組標題 ===== */
.date-group-header {
  font-size: 13px;
  color: var(--text-light);
  font-weight: 600;
  padding: 4px 4px 2px;
  margin-top: 4px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.date-group-summary {
  display: flex;
  gap: 8px;
  font-size: 12px;
  font-weight: 600;
}

.dgs-income  { color: var(--green-main); }
.dgs-expense { color: var(--red-main); }

/* ===== 響應式 ===== */
@media (min-width: 480px) {
  body {
    max-width: 480px;
    margin: 0 auto;
  }

  .app-header {
    border-radius: 0 0 28px 28px;
  }

  .modal-overlay {
    padding-top: 24px;
  }
}

/* ===== 底部導覽列 ===== */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: var(--white);
  border-top: 1px solid #ddeeff;
  display: flex;
  z-index: 150;
  max-width: 480px;
  margin: 0 auto;
}

.nav-btn {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  padding: 10px 0 12px;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text-light);
  transition: color 0.2s;
}

.nav-btn.active {
  color: var(--pink-main);
}

.nav-icon {
  font-size: 22px;
  line-height: 1;
}

.nav-label {
  font-size: 11px;
  font-weight: 600;
}

/* 讓頁面內容不被底部導覽列遮住 */
#pageHome,
#pageAccounts {
  padding-bottom: 72px;
}

/* ===== 帳戶頁面頂部 ===== */
.accounts-header-bar {
  background: linear-gradient(135deg, #4a90e2 0%, #2563c7 100%);
  color: white;
  padding: 20px 24px 22px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}

.accounts-net-worth {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
}

.accounts-net-label {
  font-size: 13px;
  opacity: 0.8;
  font-weight: 500;
}

.accounts-net-amount {
  font-size: 36px;
  font-weight: 700;
  letter-spacing: 1px;
}

.accounts-sub-stats {
  display: flex;
  align-items: center;
  gap: 0;
  background: rgba(255,255,255,0.15);
  border-radius: 14px;
  padding: 10px 0;
  width: 100%;
}

.accounts-sub-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
}

.accounts-sub-divider {
  width: 1px;
  height: 32px;
  background: rgba(255,255,255,0.3);
}

.accounts-sub-label {
  font-size: 12px;
  opacity: 0.8;
  font-weight: 500;
}

.accounts-sub-value {
  font-size: 17px;
  font-weight: 700;
}

.accounts-sub-value.asset     { color: #a8ffd4; }
.accounts-sub-value.liability { color: #ffb3b3; }

/* ===== 帳戶列表 ===== */
.account-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.account-item {
  background: var(--white);
  border-radius: var(--radius);
  padding: 16px;
  display: flex;
  align-items: center;
  gap: 14px;
  box-shadow: 0 2px 10px rgba(200, 150, 180, 0.12);
  animation: slideIn 0.25s ease;
}

.account-type-icon {
  width: 48px;
  height: 48px;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  flex-shrink: 0;
  background: var(--pink-light);
}

.account-info {
  flex: 1;
  min-width: 0;
}

.account-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-dark);
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}
.account-include-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 14px;
  background: var(--card-bg);
  border-radius: var(--radius-sm);
  border: 1px solid var(--border);
  margin-bottom: 18px;
  cursor: pointer;
  user-select: none;
}
.toggle-switch {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 24px;
  flex-shrink: 0;
}
.toggle-switch input[type="checkbox"] {
  opacity: 0;
  width: 0;
  height: 0;
  position: absolute;
  margin: 0;
  padding: 0;
}
.toggle-slider {
  position: absolute;
  inset: 0;
  background: transparent;
  border: 2px solid var(--text-light);
  border-radius: 24px;
  transition: background .2s, border-color .2s;
  cursor: pointer;
}
.toggle-slider::before {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  left: 2px;
  top: 2px;
  background: var(--text-light);
  border-radius: 50%;
  transition: transform .2s, background .2s;
}
.toggle-switch input:checked + .toggle-slider {
  background: var(--pink-main);
  border-color: var(--pink-main);
}
.toggle-switch input:checked + .toggle-slider::before {
  transform: translateX(20px);
  background: white;
}
.toggle-label-wrap {
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.toggle-label-main {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
}
.toggle-label-sub {
  font-size: 12px;
  color: var(--text-light);
}

.account-currency-tag {
  font-size: 11px;
  font-weight: 700;
  color: #7c5cbf;
  background: #ede8f7;
  border: 1px solid #c4aff0;
  border-radius: 4px;
  padding: 1px 5px;
  letter-spacing: 0.5px;
}
.account-exclude-tag {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-light);
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 1px 5px;
}
.fx-summary-bar {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
  padding: 8px 14px;
  margin-bottom: 10px;
  background: var(--card-bg);
  border-radius: var(--radius-sm);
  border: 1px dashed var(--border);
  font-size: 13px;
}
.fx-summary-label {
  color: var(--text-light);
  font-size: 12px;
  flex-shrink: 0;
}
.fx-summary-item {
  font-weight: 600;
  color: var(--text-mid);
  background: var(--bg);
  border-radius: 4px;
  padding: 2px 8px;
}

.account-type-label {
  font-size: 12px;
  color: var(--text-light);
  margin-top: 2px;
}

.account-note {
  font-size: 12px;
  color: var(--text-light);
  margin-top: 1px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.account-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
  flex-shrink: 0;
}

.account-balance {
  font-size: 16px;
  font-weight: 700;
  color: var(--pink-main);
}

.account-actions {
  display: flex;
  gap: 4px;
}

.edit-btn,
.delete-btn {
  background: none;
  border: none;
  font-size: 15px;
  cursor: pointer;
  padding: 3px 5px;
  border-radius: 6px;
  transition: background 0.2s;
  color: var(--text-light);
  line-height: 1;
}

.edit-btn:active {
  background: var(--purple-light);
  color: var(--purple-main);
}

.delete-btn:active {
  background: var(--red-light);
  color: var(--red-main);
}

/* ===== 帳戶類型格子 ===== */
.account-type-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}

/* ===== 表單 select ===== */
.form-select {
  width: 100%;
  background: var(--pink-light);
  border: 2px solid transparent;
  border-radius: var(--radius-sm);
  padding: 12px 14px;
  font-size: 15px;
  color: var(--text-dark);
  outline: none;
  transition: border-color 0.2s;
  font-family: inherit;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23b8a0ac' d='M6 8L0 0h12z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 14px center;
  padding-right: 36px;
}

.form-select:focus {
  border-color: var(--pink-main);
}

/* ===== 帳戶明細頁面 ===== */
#pageAccountDetail {
  padding-bottom: 72px;
}

.account-detail-header {
  background: linear-gradient(135deg, #4a90e2 0%, #2563c7 100%);
  color: white;
  padding: 16px 20px 20px;
}

.back-btn {
  background: rgba(255,255,255,0.2);
  border: none;
  color: white;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  margin-bottom: 14px;
  display: inline-block;
  transition: background 0.2s;
}

.back-btn:active {
  background: rgba(255,255,255,0.35);
}

.account-detail-info {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.account-detail-icon {
  font-size: 32px;
  width: 52px;
  height: 52px;
  background: rgba(255,255,255,0.2);
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.account-detail-name {
  font-size: 20px;
  font-weight: 700;
}

.account-detail-type {
  font-size: 13px;
  opacity: 0.8;
  margin-top: 2px;
}

.account-detail-stats {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.detail-stat {
  background: rgba(255,255,255,0.15);
  border-radius: 12px;
  padding: 10px 14px;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.detail-stat-balance {
  grid-column: 1 / -1;
  background: rgba(255,255,255,0.25);
}

.detail-stat-label {
  font-size: 11px;
  opacity: 0.8;
  font-weight: 500;
}

.detail-stat-value {
  font-size: 18px;
  font-weight: 700;
}

.detail-stat-value.income  { color: #a8ffd4; }
.detail-stat-value.expense { color: #ffb3b3; }
.detail-stat-value.balance { font-size: 22px; }

/* ===== 帳戶明細篩選列 ===== */
/* 本期帳單快捷列 */
.billing-cycle-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  margin: 8px 16px 0;
  padding: 7px 16px;
  border: 1.5px solid var(--pink-mid, #f48fb1);
  border-radius: 20px;
  background: #fff0f6;
  color: var(--pink-dark, #c2185b);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}
.billing-cycle-btn:active {
  background: #fce4ec;
}

/* 帳戶 modal 結算日提示文字 */
.billing-day-hint {
  margin: 4px 0 0;
  font-size: 12px;
  color: var(--text-mid);
}
.date-range-row {
  display: flex;
  align-items: center;
  gap: 6px;
}
.date-range-row .form-input {
  flex: 1;
  min-width: 0;
}
.date-range-sep {
  flex-shrink: 0;
  font-size: 14px;
  color: var(--text-mid);
}

/* 月預算排除類別選擇格 */
.exclude-cat-grid {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 8px;
}

/* 可折疊群組 */
.exclude-group {
  border: 1.5px solid #e8e8e8;
  border-radius: 10px;
  overflow: hidden;
}

.exclude-group-header {
  display: flex;
  align-items: center;
  gap: 7px;
  padding: 9px 12px;
  background: #fafafa;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
  user-select: none;
}

.exclude-group-emoji { font-size: 16px; }

.exclude-group-name { flex: 1; }

.exclude-group-badge {
  background: var(--pink-main);
  color: white;
  font-size: 11px;
  font-weight: 700;
  border-radius: 10px;
  padding: 1px 7px;
}

.exclude-group-arrow {
  font-size: 16px;
  color: var(--text-mid);
  transition: transform 0.2s;
  display: inline-block;
}

.exclude-group.open .exclude-group-arrow {
  transform: rotate(90deg);
}

.exclude-group-body {
  display: none;
  flex-wrap: wrap;
  gap: 6px;
  padding: 8px 10px 10px;
  background: white;
  border-top: 1px solid #f0f0f0;
}

.exclude-group.open .exclude-group-body {
  display: flex;
}

/* 個別項目膠囊 */
.exclude-cat-item {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 5px 11px;
  border-radius: 20px;
  border: 1.5px solid #e0e0e0;
  background: #fafafa;
  cursor: pointer;
  font-size: 13px;
  color: var(--text-dark);
  transition: all 0.15s;
  user-select: none;
}

.exclude-cat-item input[type=checkbox] {
  display: none;
}

.exclude-cat-item.checked {
  border-color: var(--pink-main);
  background: #fff0f6;
  color: var(--pink-dark);
  font-weight: 600;
}

.exclude-cat-emoji {
  font-size: 15px;
}

.detail-filter-bar {
  background: var(--white);
  padding: 12px 16px;
  border-bottom: 1px solid #ddeeff;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.detail-mode-toggle {
  display: flex;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  padding: 3px;
  gap: 3px;
}

.detail-mode-btn {
  flex: 1;
  padding: 8px 4px;
  border: none;
  border-radius: 7px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  background: transparent;
  color: var(--text-mid);
  transition: all 0.2s;
}

.detail-mode-btn.active {
  background: var(--white);
  color: var(--pink-dark);
  box-shadow: 0 2px 6px rgba(74, 144, 226, 0.2);
}

.detail-month-nav {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-dark);
}

.detail-range-nav {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.range-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.range-row label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-mid);
  width: 20px;
  flex-shrink: 0;
}

.range-date-input {
  flex: 1;
  min-width: 0;
  box-sizing: border-box;
  -webkit-appearance: none;
  appearance: none;
  background: var(--pink-light);
  border: 2px solid transparent;
  border-radius: var(--radius-sm);
  padding: 9px 12px;
  font-size: 14px;
  color: var(--text-dark);
  outline: none;
  font-family: inherit;
  transition: border-color 0.2s;
}

.range-date-input:focus {
  border-color: var(--pink-main);
}

/* ===== 計算機 ===== */
.amount-input-wrap {
  position: relative;
}

.calc-toggle-btn {
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  padding: 0 4px;
  opacity: 0.6;
  transition: opacity 0.2s;
  flex-shrink: 0;
}

.calc-toggle-btn:active,
.calc-toggle-btn.active {
  opacity: 1;
}

.calc-expression {
  font-size: 12px;
  color: var(--text-light);
  min-height: 16px;
  padding: 3px 4px 0;
  letter-spacing: 0.5px;
}

.calc-keyboard {
  margin-top: 8px;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  padding: 8px;
}

.calc-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 6px;
}

.calc-btn {
  background: var(--white);
  border: none;
  border-radius: 10px;
  padding: 14px 0;
  font-size: 17px;
  font-weight: 600;
  color: var(--text-dark);
  cursor: pointer;
  transition: background 0.12s, transform 0.1s;
  box-shadow: 0 1px 3px rgba(74,144,226,0.08);
}

.calc-btn:active {
  background: var(--pink-mid);
  transform: scale(0.93);
}

.calc-btn.calc-op {
  background: var(--purple-light);
  color: var(--pink-main);
}

.calc-btn.calc-op:active {
  background: var(--pink-mid);
}

.calc-btn.calc-fn {
  background: #f0f0f5;
  color: var(--text-mid);
  font-size: 15px;
}

.calc-btn.calc-eq {
  background: linear-gradient(135deg, #4a90e2 0%, #2563c7 100%);
  color: white;
  grid-column: span 2;
  box-shadow: 0 3px 10px rgba(74,144,226,0.3);
}

.calc-btn.calc-eq:active {
  transform: scale(0.96);
  background: linear-gradient(135deg, #2563c7 0%, #1a4fa0 100%);
}

/* ===== 帳戶拖曳排序 ===== */
.account-item .drag-handle {
  font-size: 18px;
  color: var(--text-light);
  cursor: grab;
  padding: 0 6px 0 0;
  flex-shrink: 0;
  touch-action: none;
  user-select: none;
}

.account-item .drag-handle:active {
  cursor: grabbing;
}

.account-item.dragging {
  opacity: 0.4;
  background: var(--pink-light);
}

.account-item.drag-over {
  border: 2px dashed var(--pink-main);
  background: var(--pink-light);
}

/* 帳戶類別群組標頭 */
.account-group-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 4px 6px;
  font-size: 13px;
  font-weight: 700;
  color: var(--text-mid);
  letter-spacing: 0.5px;
  user-select: none;
}

.account-group-header .group-drag-handle {
  cursor: grab;
  font-size: 16px;
  color: var(--text-light);
  padding: 2px 4px;
  border-radius: 4px;
  transition: background 0.15s;
}

.account-group-header .group-drag-handle:hover {
  background: var(--pink-mid);
  color: var(--pink-dark);
}

.account-group-header .group-drag-handle:active {
  cursor: grabbing;
}

.account-group-label {
  flex: 1;
}

.account-group-wrap {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 8px;
}

.account-group-header.dragging,
.account-group-wrap.dragging {
  opacity: 0.4;
}

.account-group-header.drag-over {
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  border: 2px dashed var(--pink-main);
  padding: 8px 4px;
}

/* ===== 分類選擇彈窗 ===== */
.cat-picker-modal {
  max-height: 75vh;
  display: flex;
  flex-direction: column;
  padding-bottom: 0;
}

.cat-picker-modal .modal-header {
  flex-shrink: 0;
}

.cat-picker-body {
  display: flex;
  flex: 1;
  overflow: hidden;
  border-top: 1px solid var(--pink-light);
  min-height: 0;
}

.cat-picker-left {
  width: 38%;
  flex-shrink: 0;
  overflow-y: auto;
  border-right: 1px solid var(--pink-light);
  padding: 8px 0;
}

.cat-picker-right {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0;
}

.cat-picker-parent {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 11px 14px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
  border-left: 3px solid transparent;
  transition: background 0.15s;
}

.cat-picker-parent:hover {
  background: var(--pink-light);
}

.cat-picker-parent.active {
  background: var(--pink-light);
  border-left-color: var(--pink-main);
  color: var(--pink-dark);
}

.cat-picker-parent-emoji {
  font-size: 18px;
  flex-shrink: 0;
}

.cat-picker-sub {
  display: flex;
  align-items: center;
  padding: 11px 16px;
  cursor: pointer;
  font-size: 14px;
  color: var(--text-dark);
  border-radius: 0;
  transition: background 0.15s;
  border-left: 3px solid transparent;
}

.cat-picker-sub:hover {
  background: var(--pink-light);
}

.cat-picker-sub.selected {
  background: var(--pink-mid);
  color: var(--pink-dark);
  font-weight: 600;
  border-left-color: var(--pink-main);
}

.cat-picker-sub-emoji {
  font-size: 16px;
  margin-right: 8px;
  flex-shrink: 0;
}

.cat-picker-sub-only {
  display: flex;
  align-items: center;
  padding: 11px 16px;
  cursor: pointer;
  font-size: 14px;
  color: var(--text-mid);
  font-style: italic;
  transition: background 0.15s;
  border-left: 3px solid transparent;
}

.cat-picker-sub-only:hover {
  background: var(--pink-light);
}

.cat-picker-sub-only.selected {
  background: var(--pink-mid);
  color: var(--pink-dark);
  font-weight: 600;
  border-left-color: var(--pink-main);
}

/* ===== 分類管理 Tab ===== */
.cat-mgmt-tabs {
  display: flex;
  gap: 0;
  margin: 0 0 4px;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  padding: 4px;
}

.cat-mgmt-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 11px 0;
  border: none;
  border-radius: 8px;
  background: transparent;
  color: var(--text-mid);
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.cat-mgmt-tab.active {
  background: var(--white);
  color: var(--pink-dark);
  box-shadow: 0 2px 8px rgba(74, 144, 226, 0.18);
}

/* ===== 分類管理頁面 ===== */
.category-mgmt-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 0 0 80px;
}

.cat-parent-item {
  background: var(--white);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
}

.cat-parent-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 13px 14px;
  cursor: pointer;
  user-select: none;
}

.cat-parent-header .drag-handle {
  color: var(--text-light);
  font-size: 18px;
  cursor: grab;
  padding: 2px 4px;
}

.cat-parent-emoji {
  font-size: 20px;
  width: 28px;
  text-align: center;
  flex-shrink: 0;
}

.cat-parent-name {
  flex: 1;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-dark);
}

.cat-parent-actions {
  display: flex;
  gap: 6px;
  align-items: center;
}

.cat-action-btn {
  background: none;
  border: none;
  cursor: pointer;
  font-size: 15px;
  padding: 4px 6px;
  border-radius: 8px;
  color: var(--text-mid);
  transition: background 0.15s;
}
.cat-action-btn:hover { background: var(--pink-light); }
.cat-add-sub-btn {
  font-size: 13px;
  color: var(--pink-main);
  font-weight: 600;
  border: 1.5px solid var(--pink-mid);
  border-radius: 8px;
  padding: 3px 8px;
  background: none;
  cursor: pointer;
  transition: background 0.15s;
}
.cat-add-sub-btn:hover { background: var(--pink-light); }

.cat-toggle-arrow {
  font-size: 12px;
  color: var(--text-light);
  transition: transform 0.2s;
  margin-left: 2px;
}
.cat-toggle-arrow.open { transform: rotate(90deg); }

.cat-sub-list {
  border-top: 1px solid var(--pink-light);
  padding: 6px 10px 10px 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.cat-sub-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  cursor: default;
}

.cat-sub-item .drag-handle {
  color: var(--text-light);
  font-size: 16px;
  cursor: grab;
}

.cat-sub-emoji {
  font-size: 16px;
  width: 22px;
  text-align: center;
  flex-shrink: 0;
}

.cat-sub-name {
  flex: 1;
  font-size: 14px;
  color: var(--text-dark);
}

.cat-parent-label {
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  padding: 8px 12px;
  font-size: 14px;
  color: var(--text-mid);
  font-weight: 600;
}

/* 記帳彈窗子分類 */
#subCategoryGroup .category-grid .cat-chip {
  font-size: 13px;
}

.cat-parent-item.dragging,
.cat-sub-item.dragging {
  opacity: 0.4;
  background: var(--pink-light);
}

.cat-parent-item.drag-over {
  border: 2px dashed var(--pink-main);
  background: var(--pink-light);
}

.cat-sub-item.drag-over {
  border: 2px dashed var(--pink-main);
  background: var(--pink-mid);
  opacity: 0.8;
}

/* ===== 滾動條美化 ===== */
::-webkit-scrollbar {
  width: 4px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: var(--pink-mid);
  border-radius: 4px;
}

/* ===== 數字輸入去除箭頭 ===== */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
}

/* ===== 設定頁 ===== */
.settings-list {
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.settings-item {
  display: flex;
  align-items: center;
  gap: 14px;
  width: 100%;
  padding: 16px;
  background: var(--white);
  border: none;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  cursor: pointer;
  text-align: left;
  transition: background 0.15s;
}
.settings-item:hover { background: var(--pink-light); }

.settings-item-icon {
  font-size: 26px;
  flex-shrink: 0;
}

.settings-item-info { flex: 1; }

.settings-item-title {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-dark);
}

.settings-item-desc {
  font-size: 13px;
  color: var(--text-mid);
  margin-top: 2px;
}

.settings-item-arrow {
  font-size: 22px;
  color: var(--text-light);
}

.settings-item-danger {
  border: 1.5px solid #ffd0d0;
  background: #fff5f5;
}
.settings-item-danger:hover { background: #ffe0e0; }
.settings-item-danger .settings-item-title { color: var(--red-main); }
.settings-item-danger .settings-item-desc  { color: #e57373; }

/* ===== 表單通用輸入框 ===== */
.form-label {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-mid);
  margin-bottom: 8px;
}

.form-input {
  width: 100%;
  background: var(--pink-light);
  border: 2px solid transparent;
  border-radius: var(--radius-sm);
  padding: 12px 14px;
  font-size: 15px;
  color: var(--text-dark);
  outline: none;
  transition: border-color 0.2s;
  font-family: inherit;
  box-sizing: border-box;
  appearance: none;
  -webkit-appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23b0a0b0' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 14px center;
}

input.form-input {
  background-image: none;
  padding-right: 14px;
}

.form-input:focus {
  border-color: var(--pink-main);
}

/* ===== Modal 底部動作按鈕列 ===== */
.modal-actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 8px;
}
.modal-actions--row {
  flex-direction: row;
  align-items: stretch;
}
.modal-actions--row .btn-save {
  flex: 8;
  min-width: 0;
  padding: 14px 8px;
}
.modal-actions--row .btn-delete {
  flex: 2;
  min-width: 0;
  width: auto;
  padding: 14px 8px;
  font-size: 14px;
}

.btn-save {
  width: 100%;
  background: linear-gradient(135deg, #4a90e2 0%, #2563c7 100%);
  color: white;
  border: none;
  border-radius: var(--radius);
  padding: 16px;
  font-size: 17px;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 20px rgba(74, 144, 226, 0.35);
  transition: transform 0.15s;
  letter-spacing: 1px;
  font-family: inherit;
}

.btn-save:active {
  transform: scale(0.97);
}

.btn-delete {
  width: 100%;
  background: var(--red-light);
  color: var(--red-main);
  border: 1.5px solid #ffd0d0;
  border-radius: var(--radius);
  padding: 13px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s, transform 0.15s;
  font-family: inherit;
}

.btn-delete:active {
  background: #ffd0d0;
  transform: scale(0.97);
}

/* ===== 預算管理頁面 ===== */
.budget-section {
  margin: 16px 16px 0;
  background: var(--white);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: hidden;
}
.budget-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  border-bottom: 1px solid var(--pink-light);
}
.budget-section-title {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-dark);
}
.budget-edit-btn {
  background: var(--pink-light);
  border: none;
  border-radius: 20px;
  padding: 5px 14px;
  font-size: 13px;
  font-weight: 600;
  color: var(--pink-main);
  cursor: pointer;
  transition: background 0.15s;
}
.budget-edit-btn:hover { background: var(--pink-mid); }

/* 月預算卡片 */
.budget-month-card {
  padding: 16px;
}
.budget-month-empty {
  text-align: center;
  color: var(--text-light);
  font-size: 14px;
  padding: 8px 0;
}
.budget-month-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  margin-bottom: 10px;
}
.budget-month-label {
  font-size: 14px;
  color: var(--text-mid);
}
.budget-month-vals {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-dark);
}
.budget-month-sep {
  color: var(--text-light);
  margin: 0 4px;
  font-weight: 400;
}
.budget-progress-wrap {
  height: 10px;
  background: var(--pink-light);
  border-radius: 99px;
  overflow: hidden;
  margin-bottom: 6px;
}
.budget-progress-bar {
  height: 100%;
  border-radius: 99px;
  background: linear-gradient(90deg, #4a90e2, #2563c7);
  transition: width 0.4s ease;
}
.budget-progress-bar.warning { background: linear-gradient(90deg, #f5a623, #e8830a); }
.budget-progress-bar.danger  { background: linear-gradient(90deg, #f05a5a, #c0392b); }
.budget-month-pct {
  font-size: 12px;
  color: var(--text-mid);
  text-align: right;
}
.budget-month-pct.warning { color: #e8830a; }
.budget-month-pct.danger  { color: var(--red-main); }

/* 類別預算列表 */
.cat-budget-list {
  padding: 8px 0;
}
.budget-empty {
  text-align: center;
  color: var(--text-light);
  font-size: 14px;
  padding: 16px;
}
.cat-budget-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  cursor: pointer;
  transition: background 0.15s;
}
.cat-budget-item:hover { background: var(--pink-light); }
.cat-budget-emoji {
  font-size: 22px;
  flex-shrink: 0;
  width: 32px;
  text-align: center;
}
.cat-budget-info {
  flex: 1;
  min-width: 0;
}
.cat-budget-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 5px;
}
.cat-budget-bar-row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.cat-budget-progress-wrap {
  flex: 1;
  height: 6px;
  background: var(--pink-light);
  border-radius: 99px;
  overflow: hidden;
}
.cat-budget-progress-bar {
  height: 100%;
  border-radius: 99px;
  background: linear-gradient(90deg, #4a90e2, #2563c7);
  transition: width 0.4s ease;
}
.cat-budget-progress-bar.warning { background: linear-gradient(90deg, #f5a623, #e8830a); }
.cat-budget-progress-bar.danger  { background: linear-gradient(90deg, #f05a5a, #c0392b); }
.cat-budget-pct {
  font-size: 12px;
  color: var(--text-mid);
  flex-shrink: 0;
  min-width: 36px;
  text-align: right;
}
.cat-budget-pct.warning { color: #e8830a; }
.cat-budget-pct.danger  { color: var(--red-main); }
.cat-budget-amount {
  font-size: 13px;
  color: var(--text-mid);
  flex-shrink: 0;
  text-align: right;
}
.cat-budget-amount span {
  color: var(--text-dark);
  font-weight: 600;
}

.clear-data-modal {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.clear-data-warning {
  font-size: 14px;
  color: var(--text-dark);
  line-height: 1.6;
  background: #fff5f5;
  border-left: 3px solid var(--red-main);
  padding: 10px 12px;
  border-radius: 6px;
  margin: 0;
}

.clear-data-confirm-label {
  font-size: 14px;
  color: var(--text-mid);
  margin: 0;
}

.clear-data-progress {
  text-align: center;
  color: var(--text-mid);
  font-size: 14px;
  padding: 8px 0;
}

/* ===== 固定收支頁 ===== */
.recurring-list {
  padding: 0 16px 16px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.recurring-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: var(--white);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.recurring-item-icon {
  font-size: 24px;
  flex-shrink: 0;
}

.recurring-item-info { flex: 1; min-width: 0; }

.recurring-item-name {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-dark);
}

.recurring-item-cat {
  font-size: 12px;
  color: var(--pink-main);
  font-weight: 600;
  margin-top: 2px;
}

.recurring-item-meta {
  font-size: 12px;
  color: var(--text-mid);
  margin-top: 3px;
}

.recurring-item-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 6px;
  flex-shrink: 0;
}

.recurring-item-amount {
  font-size: 15px;
  font-weight: 700;
}
.recurring-item-amount.expense { color: var(--red-main); }
.recurring-item-amount.income  { color: var(--green-main); }

.recurring-toggle {
  position: relative;
  width: 40px;
  height: 22px;
  flex-shrink: 0;
}
.recurring-toggle input { opacity: 0; width: 0; height: 0; }
.recurring-toggle-slider {
  position: absolute;
  inset: 0;
  background: #ccc;
  border-radius: 22px;
  cursor: pointer;
  transition: background 0.2s;
}
.recurring-toggle-slider::before {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  left: 3px;
  top: 3px;
  background: #fff;
  border-radius: 50%;
  transition: transform 0.2s;
}
.recurring-toggle input:checked + .recurring-toggle-slider { background: var(--pink-main); }
.recurring-toggle input:checked + .recurring-toggle-slider::before { transform: translateX(18px); }

.recurring-item:hover { background: var(--pink-light); }

/* 頻率輸入列 */
.freq-row {
  display: flex;
  align-items: center;
  gap: 8px;
}
.freq-n-input {
  width: 60px;
  padding: 10px 8px;
  border: 1.5px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 15px;
  text-align: center;
  background: var(--bg);
  color: var(--text-dark);
}
.freq-unit-select { flex: 1; }

/* 下次執行日標籤 */
.recurring-next-badge {
  display: inline-block;
  font-size: 11px;
  padding: 2px 7px;
  border-radius: 20px;
  background: var(--pink-light);
  color: var(--pink-main);
  font-weight: 600;
  margin-top: 3px;
}

/* 星期選擇器 */
.weekday-picker {
  display: flex;
  gap: 6px;
}

.weekday-btn {
  flex: 1;
  padding: 8px 0;
  border: 1.5px solid var(--border);
  border-radius: 10px;
  background: var(--bg);
  color: var(--text-mid);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}
.weekday-btn.active {
  background: var(--pink-main);
  border-color: var(--pink-main);
  color: #fff;
}

/* 月份日期選擇器 */
.monthday-picker {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 5px;
}

.monthday-btn {
  padding: 7px 0;
  border: 1.5px solid var(--border);
  border-radius: 8px;
  background: var(--bg);
  color: var(--text-mid);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  text-align: center;
  transition: all 0.15s;
}
.monthday-btn.active {
  background: var(--pink-main);
  border-color: var(--pink-main);
  color: #fff;
}
.monthday-btn.last-day {
  grid-column: span 1;
  font-size: 11px;
}

/* ===== 報表頁面 ===== */
#pageReport {
  padding-bottom: 80px;
  overflow-y: auto;
}

.report-period-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 4px 16px 10px;
}

.report-period-bar .month-btn {
  width: 28px;
  height: 28px;
  font-size: 16px;
  border-radius: 50%;
  background: var(--pink-light);
  color: var(--pink-main);
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s;
  flex-shrink: 0;
}
.report-period-bar .month-btn:active {
  background: var(--pink-mid);
}

.report-period-bar span {
  background: var(--pink-light);
  color: var(--pink-dark);
  font-size: 13px;
  font-weight: 700;
  padding: 5px 14px;
  border-radius: 99px;
  letter-spacing: 0.5px;
  min-width: 90px;
  text-align: center;
}

.report-tabs {
  display: flex;
  gap: 0;
  margin: 0 16px 12px;
  background: var(--pink-light);
  border-radius: 12px;
  padding: 4px;
}

.report-tab {
  flex: 1;
  padding: 9px 0;
  border: none;
  border-radius: 9px;
  background: none;
  color: var(--text-mid);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s;
}
.report-tab.active {
  background: #fff;
  color: var(--pink-main);
  box-shadow: 0 1px 4px rgba(0,0,0,0.08);
}

.report-tab-content {
  padding: 0 16px;
}

.report-ctrl-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 8px;
}

.report-pill-group {
  display: flex;
  background: var(--pink-light);
  border-radius: 99px;
  padding: 3px;
  gap: 2px;
}

.report-pill {
  border: none;
  border-radius: 99px;
  background: transparent;
  color: var(--text-mid);
  font-size: 12px;
  font-weight: 600;
  padding: 4px 12px;
  cursor: pointer;
  transition: all 0.15s;
  font-family: inherit;
  white-space: nowrap;
}

.report-pill.active {
  background: var(--white);
  color: var(--pink-main);
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}

/* 主要切換群組（支出/收入/結餘）大一點 */
.report-pill-group--main .report-pill {
  font-size: 14px;
  padding: 6px 16px;
}

.report-chart-wrap {
  position: relative;
  background: #fff;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 16px;
  margin-bottom: 14px;
  max-height: 280px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.report-chart-wrap canvas {
  max-height: 240px;
}

.report-chart-empty {
  position: absolute;
  color: var(--text-light);
  font-size: 14px;
}

/* 麵包屑 */
.report-breadcrumb {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}
.report-breadcrumb-back {
  background: var(--pink-light);
  border: none;
  border-radius: 8px;
  padding: 6px 12px;
  font-size: 13px;
  font-weight: 600;
  color: var(--pink-main);
  cursor: pointer;
}
#reportBreadcrumbLabel {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-dark);
}

/* 類別列表 */
.report-category-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 16px;
}

.report-cat-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  background: #fff;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: background 0.15s;
  border-left: 6px solid #e0e0e0;
}
.report-cat-item:hover { background: var(--pink-light); }
.report-cat-item.no-drill { cursor: default; }
.report-cat-item.no-drill:hover { background: #fff; }

.report-cat-emoji { font-size: 22px; flex-shrink: 0; }

.report-cat-info { flex: 1; min-width: 0; }

.report-cat-name {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-dark);
}

.report-cat-bar-wrap {
  height: 5px;
  background: var(--border);
  border-radius: 3px;
  margin-top: 5px;
  overflow: hidden;
}
.report-cat-bar {
  height: 100%;
  border-radius: 3px;
  transition: width 0.4s;
}
.expense .report-cat-bar { background: var(--red-main); }
.income  .report-cat-bar { background: var(--green-main); }

.report-cat-amount {
  font-size: 14px;
  font-weight: 700;
  flex-shrink: 0;
}
.report-cat-amount.expense { color: var(--red-main); }
.report-cat-amount.income  { color: var(--green-main); }

.report-cat-percent {
  font-size: 11px;
  color: var(--text-light);
  margin-top: 2px;
}

.report-cat-arrow {
  font-size: 18px;
  color: var(--text-light);
  flex-shrink: 0;
}

/* 明細列表（drill-down 最底層） */
.report-record-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: #fff;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow);
}
.report-record-date {
  font-size: 12px;
  color: var(--text-light);
  min-width: 52px;
  flex-shrink: 0;
}
.report-record-note {
  flex: 1;
  font-size: 13px;
  color: var(--text-dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.report-record-amount {
  font-size: 14px;
  font-weight: 700;
}
.report-record-amount.expense { color: var(--red-main); }
.report-record-amount.income  { color: var(--green-main); }
.report-split-hint {
  font-size: 11px;
  color: var(--text-light);
  margin-left: 4px;
}

/* 年統計卡片 */
.trend-year-stats {
  background: #fff;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 14px 16px;
  margin-bottom: 12px;
}
.trend-year-stats-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-mid);
  margin-bottom: 10px;
}
.trend-year-stats-row {
  display: flex;
  gap: 0;
}
.trend-year-stat-item {
  flex: 1;
  text-align: center;
  border-right: 1px solid var(--border);
}
.trend-year-stat-item:last-child { border-right: none; }
.trend-year-stat-label {
  font-size: 12px;
  color: var(--text-light);
  margin-bottom: 4px;
}
.trend-year-stat-val {
  font-size: 15px;
  font-weight: 700;
}
.trend-year-stat-val.income   { color: var(--green-main); }
.trend-year-stat-val.expense  { color: var(--red-main); }
.trend-year-stat-val.balance.positive { color: var(--green-main); }
.trend-year-stat-val.balance.negative { color: var(--red-main); }

/* 月份列表 */
.trend-month-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 16px;
}
.trend-month-row {
  background: #fff;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow);
  overflow: hidden;
}
.trend-month-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  cursor: pointer;
  transition: background 0.15s;
}
.trend-month-header:hover { background: var(--pink-light); }
.trend-month-label {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-dark);
}
.trend-month-right {
  display: flex;
  align-items: center;
  gap: 8px;
}
.trend-month-val {
  font-size: 14px;
  font-weight: 700;
}
.trend-month-val.income   { color: var(--green-main); }
.trend-month-val.expense  { color: var(--red-main); }
.trend-month-val.balance.positive { color: var(--green-main); }
.trend-month-val.balance.negative { color: var(--red-main); }
.trend-month-arrow {
  font-size: 18px;
  color: var(--text-light);
}
.trend-month-detail {
  border-top: 1px solid var(--border);
  padding: 6px 0;
}
.trend-detail-empty {
  text-align: center;
  color: var(--text-light);
  font-size: 13px;
  padding: 10px 0;
}

/* ===== 資產曲線 ===== */
.wealth-summary {
  margin: 12px 0 8px;
  background: #fff;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow);
  padding: 14px 16px;
}
.wealth-summary-title {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-light);
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}
.wealth-summary-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px 8px;
}
.wealth-summary-item {
  display: flex;
  flex-direction: column;
  gap: 3px;
}
.wealth-summary-label {
  font-size: 11px;
  color: var(--text-light);
}
.wealth-summary-val {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-dark);
}
.wealth-summary-val.income  { color: var(--green-main); }
.wealth-summary-val.expense { color: var(--red-main); }

.wealth-month-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 4px;
}
.wealth-month-row {
  background: #fff;
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow);
  padding: 12px 14px;
}
.wealth-month-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.wealth-month-label {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-dark);
}
.wealth-month-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
}
.wealth-month-net {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-dark);
}
.wealth-month-delta {
  font-size: 12px;
  font-weight: 600;
}
.wealth-month-delta.positive { color: var(--green-main); }
.wealth-month-delta.negative { color: var(--red-main); }
.wealth-month-sub {
  display: flex;
  gap: 12px;
  margin-top: 6px;
  font-size: 12px;
  color: var(--text-light);
}
.wealth-sub-inc { color: var(--green-main); opacity: 0.85; }
.wealth-sub-exp { color: var(--red-main);   opacity: 0.85; }

/* 類別預算分類選擇格 */
.cat-budget-cat-grid {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: 4px;
}

.cat-budget-pick-item {
  display: flex;
  align-items: center;
  gap: 7px;
  padding: 7px 12px;
  border-radius: 8px;
  border: 1.5px solid #e8e8e8;
  background: #fafafa;
  cursor: pointer;
  font-size: 14px;
  color: var(--text-dark);
  transition: all 0.15s;
}

.cat-budget-pick-item:hover {
  background: var(--pink-light);
}

.cat-budget-pick-item.selected {
  border-color: var(--pink-main);
  background: #fff0f6;
  color: var(--pink-dark);
  font-weight: 600;
}

.cat-budget-pick-parent {
  border-style: dashed;
  font-weight: 600;
  color: var(--text-mid);
}

.cat-budget-pick-parent.selected {
  border-style: solid;
}

.cat-budget-selected-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 10px;
  min-height: 28px;
}

.cat-budget-tags-hint {
  font-size: 13px;
  color: var(--text-light);
  padding: 4px 0;
}

.cat-budget-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  background: var(--pink-light);
  color: var(--pink-dark);
  border: 1.5px solid var(--pink-main);
  border-radius: 16px;
  padding: 3px 10px;
  font-size: 13px;
  font-weight: 600;
}

.cat-budget-tag-x {
  cursor: pointer;
  font-size: 11px;
  opacity: 0.7;
  margin-left: 2px;
}

/* ===== 專案頁面 ===== */
.project-list-header {
  padding: 14px 16px 8px;
  display: flex;
  justify-content: flex-end;
}

.add-project-btn {
  background: var(--pink-main);
  color: white;
  border: none;
  border-radius: 20px;
  padding: 8px 18px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
}

.project-empty {
  text-align: center;
  color: var(--text-light);
  font-size: 14px;
  padding: 40px 16px;
}

.project-card {
  display: flex;
  align-items: center;
  background: var(--white);
  margin: 0 12px 10px;
  border-radius: var(--radius);
  padding: 14px 16px;
  box-shadow: var(--shadow);
  cursor: pointer;
  gap: 12px;
}

.project-card-main {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.project-card-name {
  font-size: 16px;
  font-weight: 700;
  color: var(--text-dark);
}

.project-card-date,
.project-card-members {
  font-size: 12px;
  color: var(--text-mid);
}

.project-card-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 2px;
  flex-shrink: 0;
}

.project-card-amount {
  font-size: 17px;
  font-weight: 700;
  color: var(--pink-dark);
  white-space: nowrap;
}

.project-card-amount-label {
  font-size: 11px;
  color: var(--text-light);
}

/* 專案詳情 */
.project-detail-hero {
  background: linear-gradient(135deg, var(--pink-main), #e91e8c);
  color: white;
  padding: 20px 16px 16px;
}

.project-detail-name {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 6px;
}

.project-detail-dates,
.project-detail-members {
  font-size: 13px;
  opacity: 0.9;
  margin-top: 2px;
}

.project-settle-summary {
  background: var(--white);
  margin: 12px 12px 0;
  border-radius: var(--radius);
  padding: 14px 16px;
  box-shadow: var(--shadow);
}

.settle-total {
  font-size: 15px;
  font-weight: 700;
  color: var(--text-dark);
  margin-bottom: 10px;
}

.settle-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.settle-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  padding: 6px 10px;
  border-radius: 8px;
  background: #f8f8f8;
}

.settle-item.settle-positive { background: #e8f5e9; }
.settle-item.settle-negative { background: #fff3e0; }

.settle-name { font-weight: 600; color: var(--text-dark); }
.settle-label { font-size: 13px; color: var(--text-mid); }
.settle-positive .settle-label { color: #2e7d32; }
.settle-negative .settle-label { color: #e65100; }

.project-section-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-mid);
  padding: 14px 16px 6px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.project-record-item {
  display: flex;
  align-items: center;
  background: var(--white);
  margin: 0 12px 8px;
  border-radius: var(--radius);
  padding: 12px 14px;
  box-shadow: var(--shadow);
  gap: 10px;
}
.project-record-item-clickable {
  cursor: pointer;
  transition: background 0.15s;
}
.project-record-item-clickable:active { background: var(--pink-light); }

.project-rec-left {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  min-width: 0;
}

.project-rec-emoji { font-size: 22px; flex-shrink: 0; }
.project-rec-info { min-width: 0; }

.project-rec-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.project-rec-meta {
  font-size: 12px;
  color: var(--text-mid);
  margin-top: 2px;
}

.project-rec-right {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 4px;
  flex-shrink: 0;
}
.project-rec-amount {
  font-size: 15px;
  font-weight: 700;
  color: #e53935;
  white-space: nowrap;
}
.project-rec-edit-icon {
  font-size: 13px;
  opacity: 0.45;
}

.project-rec-split {
  font-size: 12px;
  color: var(--text-mid);
  margin-top: 5px;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 4px;
}

.rec-split-tag {
  background: var(--pink-light);
  color: var(--pink-dark);
  border-radius: 10px;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 600;
  white-space: nowrap;
}

.project-edit-btn {
  display: block;
  margin: 16px auto 40px;
  padding: 10px 28px;
  border: 1.5px solid var(--pink-main);
  border-radius: 20px;
  background: white;
  color: var(--pink-dark);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
}

/* ===== 回饋活動編輯（專案 modal）===== */
.reward-add-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 8px;
  padding: 7px 14px;
  border: 1.5px dashed var(--pink-main);
  border-radius: 20px;
  background: transparent;
  color: var(--pink-dark);
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
}
.reward-add-btn:hover { background: var(--pink-light); }

.reward-edit-row {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  background: #fafafa;
  border: 1px solid #ececec;
  border-radius: 10px;
  margin-bottom: 8px;
}
.reward-edit-right {
  display: flex;
  gap: 6px;
  align-items: center;
}
.reward-edit-name { font-size: 14px; }
.reward-edit-limit {
  flex: 1;
  min-width: 0;
  font-size: 14px;
}
.reward-edit-currency {
  width: 76px;
  flex-shrink: 0;
  font-size: 13px;
  padding: 8px 4px;
}
.reward-del-btn {
  flex-shrink: 0;
  width: 30px;
  height: 30px;
  border: none;
  background: #f0f0f0;
  border-radius: 50%;
  font-size: 13px;
  color: #888;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}
.reward-del-btn:hover { background: #ffd6d6; color: var(--red-main); }

/* ===== 回饋追蹤卡片（專案詳情）===== */
.reward-track-card {
  background: #fff;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 14px 16px;
  margin: 0 12px 10px;
}
.reward-track-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}
.reward-track-name {
  font-size: 14px;
  font-weight: 700;
  color: var(--text-dark);
  flex: 1;
}
.reward-track-currency {
  font-size: 11px;
  font-weight: 600;
  color: #fff;
  background: #aaa;
  border-radius: 10px;
  padding: 2px 7px;
}
.reward-track-badge {
  font-size: 11px;
  font-weight: 600;
  border-radius: 10px;
  padding: 2px 8px;
}
.reward-track-badge.over { background: #fde8e8; color: var(--red-main); }
.reward-track-badge.warn { background: #fff4e0; color: #e8830a; }

.reward-track-bar-wrap {
  height: 8px;
  background: #f0f0f0;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 8px;
}
.reward-track-bar {
  height: 100%;
  background: var(--pink-main);
  border-radius: 4px;
  transition: width 0.4s ease;
}
.reward-track-bar.warn { background: #e8830a; }
.reward-track-bar.over { background: var(--red-main); }

.reward-track-nums {
  display: flex;
  justify-content: space-between;
  font-size: 12px;
}
.reward-track-spent { color: var(--text-mid); }
.reward-track-remain { color: var(--text-dark); font-weight: 600; }
.reward-track-remain.over { color: var(--red-main); }

/* 分帳 UI */
#rewardActivityGroup .form-group,
#splitGroup .form-group {
  margin-bottom: 18px;
}

.split-header {
  padding: 4px 0 8px;
  border-top: 1px solid #f0f0f0;
  margin-top: 4px;
}

.split-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-mid);
}

.split-mode-toggle {
  display: flex;
  background: var(--pink-light);
  border-radius: var(--radius-sm);
  padding: 3px;
  gap: 3px;
}

.split-mode-btn {
  flex: 1;
  padding: 7px 4px;
  border: none;
  border-radius: 7px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  background: transparent;
  color: var(--text-mid);
  transition: all 0.2s;
}

.split-mode-btn.active {
  background: var(--white);
  color: var(--pink-dark);
  box-shadow: 0 2px 6px rgba(74,144,226,0.2);
}

.split-member-checks {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
}

.split-all-btn {
  padding: 5px 12px;
  border-radius: 20px;
  border: 1.5px solid var(--pink-main);
  background: var(--pink-main);
  color: white;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
}

.split-custom-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.split-custom-name {
  width: 60px;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-dark);
  flex-shrink: 0;
}

.split-custom-input-wrap {
  width: 110px;
  flex-shrink: 0;
  min-width: 0;
  box-sizing: border-box;
}

.split-custom-input-wrap input {
  min-width: 0;
  width: 100%;
  box-sizing: border-box;
  -webkit-appearance: none;
  appearance: none;
  padding: 6px 8px;
  font-size: 14px;
}

.split-preview {
  background: #f8f8f8;
  border-radius: 8px;
  padding: 8px 12px;
  margin-top: 8px;
  font-size: 13px;
}

.split-preview-row {
  display: flex;
  justify-content: space-between;
  padding: 3px 0;
  color: var(--text-dark);
}
